<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>交互地图</title>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #search-box { position: absolute; top: 10px; right: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 5px; }
        #search-input { width: 200px; }
        #legend { position: absolute; bottom: 10px; right: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 10px; }
        #back-button { position: absolute; top: 10px; left: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 5px; display: none; }
        #download-button { position: absolute; bottom: 70px; right: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 5px; }
        #info-button { position: absolute; bottom: 10px; right: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 5px; }
        #info-content { position: absolute; top: 10px; left: 10px; background-color: rgba(255, 255, 255, 0.8); padding: 10px; display: none; }
    </style>
</head>
<body>

<div id="map"></div>
<div id="search-box">
    <input type="text" id="search-input" placeholder="请输入城市名称">
    <button onclick="searchCity();">搜索</button>
</div>
<div id="legend">
    <h3>总辐照量图例</h3>
    <div style="background: linear-gradient(to right, green, yellow, orange, red); height: 20px;"></div>
    <div>800 kWh/m² - 2500 kWh/m²</div>
</div>
<div id="back-button">
    <button onclick="goBack();">返回</button>
</div>
<div id="download-button">
    <button onclick="downloadCSV();">下载数据</button>
</div>
<div id="info-button">
    <button onclick="toggleInfo();">说明</button>
</div>
<div id="info-content">
    <h3>说明</h3>
    <p>本地图结合目前的高效组件衰减（首年功率衰减≤2.0%、次年起每年衰减≤0.45%），solargis公开辐射数据以及高效系统效率82%，估算固定光伏支架最优倾角下的首年等效满负荷小时数。</p>
</div>

<script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoib2NlYW5saW5nIiwiYSI6ImNseWp5M2loZjBtYTgyaXI1aXQ1ZDI2djAifQ.7U0sX8PnyUjaFRvA9XaNTg';

    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [104.195397, 35.86166], // 初始地图中心点
        zoom: 3 // 初始缩放级别
    });

    var cityData = [
{ city: '日喀则', total_radiation: 2413, utilization_hours: 1939, province: '西藏自治区', coordinates: [88.880423, 29.266838] },
{ city: '阿里', total_radiation: 2405, utilization_hours: 1933, province: '西藏自治区', coordinates: [80.105786, 32.500987] },
{ city: '拉萨', total_radiation: 2336, utilization_hours: 1877, province: '西藏自治区', coordinates: [91.171924, 29.653491] },
{ city: '山南', total_radiation: 2237, utilization_hours: 1798, province: '西藏自治区', coordinates: [91.771426, 29.237722] },
{ city: '共和县', total_radiation: 2146, utilization_hours: 1725, province: '青海省', coordinates: [100.619405, 36.284158] },
{ city: '格尔木', total_radiation: 2146, utilization_hours: 1725, province: '青海省', coordinates: [94.928293, 36.407272] },
{ city: '那曲', total_radiation: 2132, utilization_hours: 1713, province: '西藏自治区', coordinates: [92.05151, 31.477905] },
{ city: '同仁', total_radiation: 2121, utilization_hours: 1704, province: '青海省', coordinates: [102.018663, 35.515769] },
{ city: '德令哈', total_radiation: 2062, utilization_hours: 1657, province: '青海省', coordinates: [97.361528, 37.369865] },
{ city: '金昌', total_radiation: 2044, utilization_hours: 1643, province: '甘肃省', coordinates: [102.187972, 38.521468] },
{ city: '和田', total_radiation: 2040, utilization_hours: 1640, province: '新疆维吾尔自治区', coordinates: [79.921646, 37.114406] },
{ city: '张掖', total_radiation: 2040, utilization_hours: 1640, province: '甘肃省', coordinates: [100.449858, 38.924766] },
{ city: '包头', total_radiation: 2026, utilization_hours: 1628, province: '内蒙古自治区', coordinates: [109.95315, 40.621327] },
{ city: '吐鲁番', total_radiation: 2026, utilization_hours: 1628, province: '新疆维吾尔自治区', coordinates: [89.190374, 42.950736] },
{ city: '酒泉', total_radiation: 2022, utilization_hours: 1625, province: '甘肃省', coordinates: [98.49432, 39.733416] },
{ city: '嘉峪关', total_radiation: 2022, utilization_hours: 1625, province: '甘肃省', coordinates: [98.2882, 39.77325] },
{ city: '石嘴山', total_radiation: 2022, utilization_hours: 1625, province: '宁夏回族自治区', coordinates: [106.382792, 38.984632] },
{ city: '乌海', total_radiation: 2011, utilization_hours: 1616, province: '内蒙古自治区', coordinates: [106.79415, 39.655048] },
{ city: '乌兰察布', total_radiation: 2004, utilization_hours: 1610, province: '内蒙古自治区', coordinates: [113.132227, 40.994526] },
{ city: '巴彦淖尔', total_radiation: 2000, utilization_hours: 1607, province: '内蒙古自治区', coordinates: [107.387767, 40.742987] },
{ city: '承德', total_radiation: 1993, utilization_hours: 1601, province: '河北省', coordinates: [117.962749, 40.952942] },
{ city: '通辽', total_radiation: 1986, utilization_hours: 1596, province: '内蒙古自治区', coordinates: [122.243309, 43.653566] },
{ city: '巴音郭楞', total_radiation: 1978, utilization_hours: 1590, province: '新疆维吾尔自治区', coordinates: [86.145298, 41.764115] },
{ city: '榆林', total_radiation: 1971, utilization_hours: 1584, province: '陕西省', coordinates: [109.734104, 38.28576] },
{ city: '中卫', total_radiation: 1967, utilization_hours: 1581, province: '宁夏回族自治区', coordinates: [105.19677, 37.500185] },
{ city: '锡林郭勒', total_radiation: 1960, utilization_hours: 1575, province: '内蒙古自治区', coordinates: [116.047387, 43.933212] },
{ city: '玉树', total_radiation: 1960, utilization_hours: 1575, province: '青海省', coordinates: [97.006292, 33.006308] },
{ city: '赤峰', total_radiation: 1953, utilization_hours: 1569, province: '内蒙古自治区', coordinates: [118.887613, 42.256876] },
{ city: '阿拉善', total_radiation: 1953, utilization_hours: 1569, province: '内蒙古自治区', coordinates: [105.729135, 38.851554] },
{ city: '阿克苏', total_radiation: 1953, utilization_hours: 1569, province: '新疆维吾尔自治区', coordinates: [80.265068, 41.170712] },
{ city: '林芝', total_radiation: 1945, utilization_hours: 1563, province: '西藏自治区', coordinates: [94.361436, 29.64875] },
{ city: '哈密', total_radiation: 1945, utilization_hours: 1563, province: '新疆维吾尔自治区', coordinates: [93.515053, 42.819346] },
{ city: '白银', total_radiation: 1938, utilization_hours: 1557, province: '甘肃省', coordinates: [104.138872, 36.545123] },
{ city: '吴忠', total_radiation: 1935, utilization_hours: 1555, province: '宁夏回族自治区', coordinates: [106.198613, 37.997755] },
{ city: '阿坝', total_radiation: 1927, utilization_hours: 1549, province: '四川省', coordinates: [102.224504, 31.899427] },
{ city: '兴安盟', total_radiation: 1898, utilization_hours: 1525, province: '内蒙古自治区', coordinates: [122.037796, 46.082373] },
{ city: '定西', total_radiation: 1898, utilization_hours: 1525, province: '甘肃省', coordinates: [104.592342, 35.607947] },
{ city: '临夏', total_radiation: 1898, utilization_hours: 1525, province: '甘肃省', coordinates: [103.210386, 35.601792] },
{ city: '果洛-达日', total_radiation: 1894, utilization_hours: 1522, province: '青海省', coordinates: [99.651863, 33.739293] },
{ city: '丽江', total_radiation: 1891, utilization_hours: 1519, province: '云南省', coordinates: [100.225936, 26.855165] },
{ city: '昌都', total_radiation: 1891, utilization_hours: 1519, province: '西藏自治区', coordinates: [97.170425, 31.142879] },
{ city: '廊坊', total_radiation: 1887, utilization_hours: 1516, province: '河北省', coordinates: [116.683546, 39.538304] },
{ city: '阿勒泰', total_radiation: 1887, utilization_hours: 1516, province: '新疆维吾尔自治区', coordinates: [88.141253, 47.844924] },
{ city: '武威', total_radiation: 1887, utilization_hours: 1516, province: '甘肃省', coordinates: [102.637821, 37.92898] },
{ city: '朔州', total_radiation: 1883, utilization_hours: 1514, province: '山西省', coordinates: [112.432906, 39.331734] },
{ city: '石河子', total_radiation: 1869, utilization_hours: 1502, province: '新疆维吾尔自治区', coordinates: [86.080397, 44.305368] },
{ city: '大同', total_radiation: 1865, utilization_hours: 1499, province: '山西省', coordinates: [113.366749, 40.09711] },
{ city: '沧州', total_radiation: 1851, utilization_hours: 1487, province: '河北省', coordinates: [116.838715, 38.304676] },
{ city: '银川', total_radiation: 1847, utilization_hours: 1484, province: '宁夏回族自治区', coordinates: [106.230977, 38.487783] },
{ city: '滨州', total_radiation: 1836, utilization_hours: 1475, province: '山东省', coordinates: [117.970731, 37.382687] },
{ city: '攀枝花', total_radiation: 1829, utilization_hours: 1470, province: '四川省', coordinates: [101.71846, 26.582417] },
{ city: '迪庆', total_radiation: 1829, utilization_hours: 1470, province: '云南省', coordinates: [99.70211, 27.819149] },
{ city: '昆明', total_radiation: 1827, utilization_hours: 1468, province: '云南省', coordinates: [102.833669, 24.88149] },
{ city: '秦皇岛', total_radiation: 1825, utilization_hours: 1467, province: '河北省', coordinates: [119.52022, 39.888243] },
{ city: '衡水', total_radiation: 1825, utilization_hours: 1467, province: '河北省', coordinates: [115.668987, 37.739367] },
{ city: '图木舒克', total_radiation: 1825, utilization_hours: 1467, province: '新疆维吾尔自治区', coordinates: [79.074965, 39.867776] },
{ city: '德州', total_radiation: 1825, utilization_hours: 1467, province: '山东省', coordinates: [116.359244, 37.436492] },
{ city: '呼伦贝尔', total_radiation: 1821, utilization_hours: 1464, province: '内蒙古自治区', coordinates: [119.77845, 49.166536] },
{ city: '延安', total_radiation: 1821, utilization_hours: 1464, province: '陕西省', coordinates: [109.49468, 36.650109] },
{ city: '东营', total_radiation: 1818, utilization_hours: 1461, province: '山东省', coordinates: [118.674633, 37.433992] },
{ city: '伊犁', total_radiation: 1807, utilization_hours: 1452, province: '新疆维吾尔自治区', coordinates: [81.323691, 43.917106] },
{ city: '烟台', total_radiation: 1803, utilization_hours: 1449, province: '山东省', coordinates: [121.447755, 37.464551] },
{ city: '威海', total_radiation: 1803, utilization_hours: 1449, province: '山东省', coordinates: [122.120519, 37.513315] },
{ city: '邯郸', total_radiation: 1799, utilization_hours: 1446, province: '河北省', coordinates: [114.53915, 36.625849] },
{ city: '邢台', total_radiation: 1799, utilization_hours: 1446, province: '河北省', coordinates: [114.49742, 37.060227] },
{ city: '泰安', total_radiation: 1799, utilization_hours: 1446, province: '山东省', coordinates: [117.086963, 36.201784] },
{ city: '聊城', total_radiation: 1799, utilization_hours: 1446, province: '山东省', coordinates: [115.985238, 36.455857] },
{ city: '克孜勒苏', total_radiation: 1796, utilization_hours: 1443, province: '新疆维吾尔自治区', coordinates: [76.167327, 39.714734] },
{ city: '喀什', total_radiation: 1796, utilization_hours: 1443, province: '新疆维吾尔自治区', coordinates: [75.989746, 39.470492] },
{ city: '阿拉尔', total_radiation: 1796, utilization_hours: 1443, province: '新疆维吾尔自治区', coordinates: [81.280532, 40.547205] },
{ city: '大理', total_radiation: 1792, utilization_hours: 1440, province: '云南省', coordinates: [100.301614, 25.678466] },
{ city: '博尔塔拉', total_radiation: 1792, utilization_hours: 1440, province: '新疆维吾尔自治区', coordinates: [82.066363, 44.906039] },
{ city: '黑河', total_radiation: 1789, utilization_hours: 1437, province: '黑龙江省', coordinates: [127.528226, 50.244887] },
{ city: '淄博', total_radiation: 1789, utilization_hours: 1437, province: '山东省', coordinates: [118.054994, 36.813787] },
{ city: '潍坊', total_radiation: 1789, utilization_hours: 1437, province: '山东省', coordinates: [119.161721, 36.707668] },
{ city: '塔城', total_radiation: 1781, utilization_hours: 1431, province: '新疆维吾尔自治区', coordinates: [82.980316, 46.745364] },
{ city: '莱芜', total_radiation: 1781, utilization_hours: 1431, province: '山东省', coordinates: [117.675828, 36.214895] },
{ city: '克拉玛依', total_radiation: 1778, utilization_hours: 1428, province: '新疆维吾尔自治区', coordinates: [84.889239, 45.577712] },
{ city: '东方', total_radiation: 1767, utilization_hours: 1420, province: '海南省', coordinates: [108.651829, 19.095187] },
{ city: '齐齐哈尔', total_radiation: 1756, utilization_hours: 1411, province: '黑龙江省', coordinates: [123.918193, 47.354892] },
{ city: '沈阳', total_radiation: 1755, utilization_hours: 1410, province: '辽宁省', coordinates: [123.464675, 41.677576] },
{ city: '漠河', total_radiation: 1752, utilization_hours: 1408, province: '黑龙江省', coordinates: [122.539313, 52.972465] },
{ city: '五指山', total_radiation: 1752, utilization_hours: 1408, province: '海南省', coordinates: [109.516784, 18.774827] },
{ city: '朝阳', total_radiation: 1745, utilization_hours: 1402, province: '辽宁省', coordinates: [120.488801, 41.601855] },
{ city: '忻州', total_radiation: 1745, utilization_hours: 1402, province: '山西省', coordinates: [112.734149, 38.415958] },
{ city: '张家口', total_radiation: 1741, utilization_hours: 1399, province: '河北省', coordinates: [114.885895, 40.768931] },
{ city: '乐东', total_radiation: 1741, utilization_hours: 1399, province: '海南省', coordinates: [109.173384, 18.750063] },
{ city: '临沂', total_radiation: 1741, utilization_hours: 1399, province: '山东省', coordinates: [118.356464, 35.103771] },
{ city: '平凉', total_radiation: 1737, utilization_hours: 1396, province: '甘肃省', coordinates: [106.664913, 35.542417] },
{ city: '固原', total_radiation: 1737, utilization_hours: 1396, province: '宁夏回族自治区', coordinates: [106.24267, 36.01628] },
{ city: '白沙', total_radiation: 1737, utilization_hours: 1396, province: '海南省', coordinates: [109.4429, 19.221641] },
{ city: '三亚', total_radiation: 1734, utilization_hours: 1393, province: '海南省', coordinates: [109.511709, 18.252865] },
{ city: '长春', total_radiation: 1730, utilization_hours: 1390, province: '吉林省', coordinates: [125.323643, 43.816996] },
{ city: '白城', total_radiation: 1730, utilization_hours: 1390, province: '吉林省', coordinates: [122.838102, 45.620131] },
{ city: '德宏', total_radiation: 1730, utilization_hours: 1390, province: '云南省', coordinates: [98.585621, 24.433146] },
{ city: '保亭', total_radiation: 1730, utilization_hours: 1390, province: '海南省', coordinates: [109.700279, 18.640339] },
{ city: '陵水', total_radiation: 1730, utilization_hours: 1390, province: '海南省', coordinates: [110.037553, 18.506045] },
{ city: '伊春', total_radiation: 1726, utilization_hours: 1387, province: '黑龙江省', coordinates: [128.840863, 47.728332] },
{ city: '鹤壁', total_radiation: 1726, utilization_hours: 1387, province: '河南省', coordinates: [114.297305, 35.748329] },
{ city: '琼中', total_radiation: 1723, utilization_hours: 1384, province: '海南省', coordinates: [109.838423, 19.03327] },
{ city: '济宁', total_radiation: 1723, utilization_hours: 1384, province: '山东省', coordinates: [116.587116, 35.415117] },
{ city: '菏泽', total_radiation: 1723, utilization_hours: 1384, province: '山东省', coordinates: [115.479646, 35.234309] },
{ city: '琼海', total_radiation: 1719, utilization_hours: 1382, province: '海南省', coordinates: [110.474524, 19.259112] },
{ city: '辽源', total_radiation: 1716, utilization_hours: 1379, province: '吉林省', coordinates: [125.144676, 42.887961] },
{ city: '锦州', total_radiation: 1716, utilization_hours: 1379, province: '辽宁省', coordinates: [121.126859, 41.096114] },
{ city: '西宁', total_radiation: 1716, utilization_hours: 1379, province: '青海省', coordinates: [101.777795, 36.616621] },
{ city: '海北海晏', total_radiation: 1716, utilization_hours: 1379, province: '青海省', coordinates: [100.994521, 36.896667] },
{ city: '平安', total_radiation: 1716, utilization_hours: 1379, province: '青海省', coordinates: [102.108538, 36.500166] },
{ city: '日照', total_radiation: 1716, utilization_hours: 1379, province: '山东省', coordinates: [119.52685, 35.416912] },
{ city: '庆阳', total_radiation: 1712, utilization_hours: 1376, province: '甘肃省', coordinates: [107.643433, 35.709459] },
{ city: '吉林', total_radiation: 1708, utilization_hours: 1373, province: '吉林省', coordinates: [125.325802, 43.896942] },
{ city: '呼和浩特', total_radiation: 1708, utilization_hours: 1373, province: '内蒙古自治区', coordinates: [111.748814, 40.842127] },
{ city: '焦作', total_radiation: 1708, utilization_hours: 1373, province: '河南省', coordinates: [113.241902, 35.215726] },
{ city: '新乡', total_radiation: 1708, utilization_hours: 1373, province: '河南省', coordinates: [113.92679, 35.303589] },
{ city: '濮阳', total_radiation: 1708, utilization_hours: 1373, province: '河南省', coordinates: [115.029246, 35.762731] },
{ city: '怒江', total_radiation: 1708, utilization_hours: 1373, province: '云南省', coordinates: [98.8566, 25.817555] },
{ city: '屯昌', total_radiation: 1708, utilization_hours: 1373, province: '海南省', coordinates: [110.101667, 19.351662] },
{ city: '阳泉', total_radiation: 1705, utilization_hours: 1370, province: '山西省', coordinates: [113.580426, 37.857094] },
{ city: '万宁', total_radiation: 1705, utilization_hours: 1370, province: '海南省', coordinates: [110.392605, 18.793697] },
{ city: '四平', total_radiation: 1701, utilization_hours: 1367, province: '吉林省', coordinates: [124.350599, 43.166764] },
{ city: '葫芦岛', total_radiation: 1701, utilization_hours: 1367, province: '辽宁省', coordinates: [120.836783, 40.710974] },
{ city: '保山', total_radiation: 1701, utilization_hours: 1367, province: '云南省', coordinates: [99.161489, 25.112018] },
{ city: '太原', total_radiation: 1697, utilization_hours: 1364, province: '山西省', coordinates: [112.549656, 37.870451] },
{ city: '晋中', total_radiation: 1697, utilization_hours: 1364, province: '山西省', coordinates: [112.752633, 37.688006] },
{ city: '吕梁', total_radiation: 1697, utilization_hours: 1364, province: '山西省', coordinates: [111.14454, 37.518996] },
{ city: '五家渠', total_radiation: 1697, utilization_hours: 1364, province: '新疆维吾尔自治区', coordinates: [87.542852, 44.166489] },
{ city: '铜川', total_radiation: 1697, utilization_hours: 1364, province: '陕西省', coordinates: [108.945116, 34.897133] },
{ city: '阜新', total_radiation: 1694, utilization_hours: 1361, province: '辽宁省', coordinates: [121.670052, 42.022028] },
{ city: '唐山', total_radiation: 1694, utilization_hours: 1361, province: '河北省', coordinates: [118.180149, 39.63068] },
{ city: '松原', total_radiation: 1690, utilization_hours: 1358, province: '吉林省', coordinates: [124.825321, 45.14191] },
{ city: '临沧', total_radiation: 1690, utilization_hours: 1358, province: '云南省', coordinates: [100.088837, 23.884175] },
{ city: '大庆', total_radiation: 1683, utilization_hours: 1352, province: '黑龙江省', coordinates: [125.104078, 46.589498] },
{ city: '天津', total_radiation: 1668, utilization_hours: 1340, province: '天津市', coordinates: [117.201509, 39.085318] },
{ city: '洛阳', total_radiation: 1664, utilization_hours: 1338, province: '河南省', coordinates: [112.453895, 34.619702] },
{ city: '商丘', total_radiation: 1664, utilization_hours: 1338, province: '河南省', coordinates: [115.656358, 34.415165] },
{ city: '三门峡', total_radiation: 1664, utilization_hours: 1338, province: '河南省', coordinates: [111.200482, 34.773196] },
{ city: '红河', total_radiation: 1664, utilization_hours: 1338, province: '云南省', coordinates: [103.374873, 23.363129] },
{ city: '昌江', total_radiation: 1661, utilization_hours: 1335, province: '海南省', coordinates: [109.055783, 19.298139] },
{ city: '澄迈', total_radiation: 1661, utilization_hours: 1335, province: '海南省', coordinates: [110.007497, 19.738885] },
{ city: '开封', total_radiation: 1657, utilization_hours: 1332, province: '河南省', coordinates: [114.314278, 34.798083] },
{ city: '鸡西', total_radiation: 1653, utilization_hours: 1329, province: '黑龙江省', coordinates: [130.969385, 45.295087] },
{ city: '绥化', total_radiation: 1650, utilization_hours: 1326, province: '黑龙江省', coordinates: [126.968714, 46.654147] },
{ city: '文山', total_radiation: 1650, utilization_hours: 1326, province: '云南省', coordinates: [104.21567, 23.400983] },
{ city: '牡丹江', total_radiation: 1646, utilization_hours: 1323, province: '黑龙江省', coordinates: [129.632928, 44.551486] },
{ city: '天水', total_radiation: 1646, utilization_hours: 1323, province: '甘肃省', coordinates: [105.724828, 34.581514] },
{ city: '甘南', total_radiation: 1646, utilization_hours: 1323, province: '甘肃省', coordinates: [102.911736, 34.983266] },
{ city: '陇南', total_radiation: 1646, utilization_hours: 1323, province: '甘肃省', coordinates: [104.960296, 33.370174] },
{ city: '临高', total_radiation: 1646, utilization_hours: 1323, province: '海南省', coordinates: [109.690508, 19.912025] },
{ city: '楚雄', total_radiation: 1639, utilization_hours: 1317, province: '云南省', coordinates: [101.528304, 25.045678] },
{ city: '淮北', total_radiation: 1639, utilization_hours: 1317, province: '安徽省', coordinates: [116.798362, 33.956264] },
{ city: '北京', total_radiation: 1636, utilization_hours: 1315, province: '北京市', coordinates: [116.407387, 39.904179] },
{ city: '儋州', total_radiation: 1635, utilization_hours: 1314, province: '海南省', coordinates: [109.580812, 19.520948] },
{ city: '西双版纳', total_radiation: 1632, utilization_hours: 1311, province: '云南省', coordinates: [100.797002, 22.009037] },
{ city: '宿州', total_radiation: 1632, utilization_hours: 1311, province: '安徽省', coordinates: [116.96419, 33.647726] },
{ city: '玉溪', total_radiation: 1628, utilization_hours: 1308, province: '云南省', coordinates: [102.526673, 24.346786] },
{ city: '通化', total_radiation: 1624, utilization_hours: 1305, province: '吉林省', coordinates: [125.939721, 41.728312] },
{ city: '渭南', total_radiation: 1624, utilization_hours: 1305, province: '陕西省', coordinates: [109.470962, 34.520632] },
{ city: '鹤岗', total_radiation: 1610, utilization_hours: 1294, province: '黑龙江省', coordinates: [130.297687, 47.350659] },
{ city: '双鸭山', total_radiation: 1610, utilization_hours: 1294, province: '黑龙江省', coordinates: [131.141563, 46.676157] },
{ city: '七台河', total_radiation: 1610, utilization_hours: 1294, province: '黑龙江省', coordinates: [131.003015, 45.771178] },
{ city: '抚顺', total_radiation: 1610, utilization_hours: 1294, province: '辽宁省', coordinates: [123.957053, 41.881311] },
{ city: '辽阳', total_radiation: 1610, utilization_hours: 1294, province: '辽宁省', coordinates: [123.239669, 41.267396] },
{ city: '丹东', total_radiation: 1610, utilization_hours: 1294, province: '辽宁省', coordinates: [124.354419, 40.000646] },
{ city: '铁岭', total_radiation: 1606, utilization_hours: 1291, province: '辽宁省', coordinates: [123.726008, 42.223709] },
{ city: '本溪', total_radiation: 1606, utilization_hours: 1291, province: '辽宁省', coordinates: [123.684984, 41.486834] },
{ city: '营口', total_radiation: 1606, utilization_hours: 1291, province: '辽宁省', coordinates: [122.219148, 40.625027] },
{ city: '许昌', total_radiation: 1606, utilization_hours: 1291, province: '河南省', coordinates: [113.852004, 34.03732] },
{ city: '西昌', total_radiation: 1602, utilization_hours: 1288, province: '四川省', coordinates: [102.264166, 27.89441] },
{ city: '鞍山', total_radiation: 1595, utilization_hours: 1282, province: '辽宁省', coordinates: [122.994183, 41.108239] },
{ city: '盘锦', total_radiation: 1591, utilization_hours: 1279, province: '辽宁省', coordinates: [122.170729, 40.71956] },
{ city: '驻马店', total_radiation: 1584, utilization_hours: 1273, province: '河南省', coordinates: [114.021988, 33.014038] },
{ city: '石家庄', total_radiation: 1582, utilization_hours: 1272, province: '河北省', coordinates: [114.514976, 38.042007] },
{ city: '普洱', total_radiation: 1580, utilization_hours: 1270, province: '云南省', coordinates: [100.966011, 22.825229] },
{ city: '海口', total_radiation: 1580, utilization_hours: 1270, province: '海南省', coordinates: [110.198418, 20.045805] },
{ city: '安阳', total_radiation: 1577, utilization_hours: 1267, province: '河南省', coordinates: [114.39248, 36.098779] },
{ city: '定安', total_radiation: 1577, utilization_hours: 1267, province: '海南省', coordinates: [110.358001, 19.681215] },
{ city: '白山', total_radiation: 1573, utilization_hours: 1264, province: '吉林省', coordinates: [126.414274, 41.944132] },
{ city: '哈尔滨', total_radiation: 1570, utilization_hours: 1261, province: '黑龙江省', coordinates: [126.53505, 45.802981] },
{ city: '佳木斯', total_radiation: 1570, utilization_hours: 1261, province: '黑龙江省', coordinates: [130.318916, 46.800002] },
{ city: '大连', total_radiation: 1570, utilization_hours: 1261, province: '辽宁省', coordinates: [121.614786, 38.913962] },
{ city: '晋城', total_radiation: 1562, utilization_hours: 1255, province: '山西省', coordinates: [112.852022, 35.491315] },
{ city: '平顶山', total_radiation: 1562, utilization_hours: 1255, province: '河南省', coordinates: [113.192595, 33.766554] },
{ city: '宝鸡', total_radiation: 1562, utilization_hours: 1255, province: '陕西省', coordinates: [107.237682, 34.362862] },
{ city: '文昌', total_radiation: 1562, utilization_hours: 1255, province: '海南省', coordinates: [110.797473, 19.544234] },
{ city: '延边', total_radiation: 1559, utilization_hours: 1252, province: '吉林省', coordinates: [129.470605, 42.909426] },
{ city: '临汾', total_radiation: 1559, utilization_hours: 1252, province: '山西省', coordinates: [111.51931, 36.088581] },
{ city: '济南', total_radiation: 1559, utilization_hours: 1252, province: '山东省', coordinates: [117.120128, 36.652069] },
{ city: '昭通', total_radiation: 1551, utilization_hours: 1247, province: '云南省', coordinates: [103.717078, 27.338185] },
{ city: '曲靖', total_radiation: 1548, utilization_hours: 1244, province: '云南省', coordinates: [103.796288, 25.490866] },
{ city: '淮南', total_radiation: 1548, utilization_hours: 1244, province: '安徽省', coordinates: [117.018603, 32.585384] },
{ city: '郑州', total_radiation: 1544, utilization_hours: 1241, province: '河南省', coordinates: [113.625351, 34.746303] },
{ city: '乌鲁木齐', total_radiation: 1540, utilization_hours: 1238, province: '新疆维吾尔自治区', coordinates: [87.616824, 43.825377] },
{ city: '昌吉', total_radiation: 1540, utilization_hours: 1238, province: '新疆维吾尔自治区', coordinates: [87.308995, 44.011044] },
{ city: '兰州', total_radiation: 1537, utilization_hours: 1235, province: '甘肃省', coordinates: [103.834228, 36.060798] },
{ city: '阜阳', total_radiation: 1537, utilization_hours: 1235, province: '安徽省', coordinates: [115.814252, 32.891032] },
{ city: '甘孜', total_radiation: 1522, utilization_hours: 1223, province: '四川省', coordinates: [101.96231, 30.04952] },
{ city: '南平', total_radiation: 1522, utilization_hours: 1223, province: '福建省', coordinates: [118.081325, 27.382829] },
{ city: '漯河', total_radiation: 1518, utilization_hours: 1220, province: '河南省', coordinates: [114.0166, 33.58038] },
{ city: '南阳', total_radiation: 1518, utilization_hours: 1220, province: '河南省', coordinates: [112.528549, 32.990218] },
{ city: '周口', total_radiation: 1518, utilization_hours: 1220, province: '河南省', coordinates: [114.701222, 33.634652] },
{ city: '运城', total_radiation: 1507, utilization_hours: 1211, province: '山西省', coordinates: [111.007051, 35.02667] },
{ city: '信阳', total_radiation: 1507, utilization_hours: 1211, province: '河南省', coordinates: [114.091058, 32.148624] },
{ city: '连云港', total_radiation: 1507, utilization_hours: 1211, province: '江苏省', coordinates: [119.221487, 34.596639] },
{ city: '枣庄', total_radiation: 1500, utilization_hours: 1206, province: '山东省', coordinates: [117.323759, 34.810858] },
{ city: '保定', total_radiation: 1497, utilization_hours: 1203, province: '河北省', coordinates: [115.464523, 38.874476] },
{ city: '济源', total_radiation: 1497, utilization_hours: 1203, province: '河南省', coordinates: [112.602347, 35.069057] },
{ city: '湛江', total_radiation: 1495, utilization_hours: 1201, province: '广东省', coordinates: [110.357538, 21.270108] },
{ city: '汉中', total_radiation: 1482, utilization_hours: 1191, province: '陕西省', coordinates: [107.02319, 33.066373] },
{ city: '西安', total_radiation: 1478, utilization_hours: 1188, province: '陕西省', coordinates: [108.939645, 34.343207] },
{ city: '长治', total_radiation: 1475, utilization_hours: 1185, province: '山西省', coordinates: [113.117394, 36.195142] },
{ city: '芜湖', total_radiation: 1471, utilization_hours: 1182, province: '安徽省', coordinates: [118.433065, 31.352614] },
{ city: '汕头', total_radiation: 1467, utilization_hours: 1179, province: '广东省', coordinates: [116.681956, 23.354152] },
{ city: '潮州', total_radiation: 1460, utilization_hours: 1173, province: '广东省', coordinates: [116.621901, 23.657662] },
{ city: '珠海', total_radiation: 1460, utilization_hours: 1173, province: '广东省', coordinates: [113.576892, 22.271644] },
{ city: '盐城', total_radiation: 1453, utilization_hours: 1167, province: '江苏省', coordinates: [120.16263, 33.348176] },
{ city: '淮安', total_radiation: 1453, utilization_hours: 1167, province: '江苏省', coordinates: [119.113166, 33.551495] },
{ city: '揭阳', total_radiation: 1449, utilization_hours: 1164, province: '广东省', coordinates: [116.372732, 23.550968] },
{ city: '宿迁', total_radiation: 1445, utilization_hours: 1162, province: '江苏省', coordinates: [118.275228, 33.963186] },
{ city: '徐州', total_radiation: 1442, utilization_hours: 1159, province: '江苏省', coordinates: [117.283752, 34.204224] },
{ city: '梅州', total_radiation: 1431, utilization_hours: 1150, province: '广东省', coordinates: [116.122046, 24.288832] },
{ city: '南通', total_radiation: 1431, utilization_hours: 1150, province: '江苏省', coordinates: [120.894522, 31.981269] },
{ city: '泉州', total_radiation: 1431, utilization_hours: 1150, province: '福建省', coordinates: [118.675724, 24.874452] },
{ city: '三明', total_radiation: 1431, utilization_hours: 1150, province: '福建省', coordinates: [117.638919, 26.263455] },
{ city: '龙岩', total_radiation: 1431, utilization_hours: 1150, province: '福建省', coordinates: [117.017362, 25.075884] },
{ city: '蚌埠', total_radiation: 1431, utilization_hours: 1150, province: '安徽省', coordinates: [117.388566, 32.91682] },
{ city: '安庆', total_radiation: 1427, utilization_hours: 1147, province: '安徽省', coordinates: [117.115349, 30.531828] },
{ city: '阳江', total_radiation: 1424, utilization_hours: 1144, province: '广东省', coordinates: [111.98343, 21.856853] },
{ city: '黄石', total_radiation: 1420, utilization_hours: 1141, province: '湖北省', coordinates: [115.038999, 30.201082] },
{ city: '潜江', total_radiation: 1420, utilization_hours: 1141, province: '湖北省', coordinates: [112.900279, 30.401954] },
{ city: '厦门', total_radiation: 1420, utilization_hours: 1141, province: '福建省', coordinates: [118.08891, 24.479627] },
{ city: '中山', total_radiation: 1416, utilization_hours: 1138, province: '广东省', coordinates: [113.392517, 22.517024] },
{ city: '十堰', total_radiation: 1413, utilization_hours: 1135, province: '湖北省', coordinates: [110.798921, 32.629057] },
{ city: '漳州', total_radiation: 1413, utilization_hours: 1135, province: '福建省', coordinates: [117.647298, 24.515297] },
{ city: '亳州', total_radiation: 1409, utilization_hours: 1132, province: '安徽省', coordinates: [115.778588, 33.846285] },
{ city: '黔西南', total_radiation: 1405, utilization_hours: 1129, province: '贵州省', coordinates: [104.906419, 25.087733] },
{ city: '安康', total_radiation: 1405, utilization_hours: 1129, province: '陕西省', coordinates: [109.029017, 32.685435] },
{ city: '六盘水', total_radiation: 1402, utilization_hours: 1126, province: '贵州省', coordinates: [104.830357, 26.592538] },
{ city: '茂名', total_radiation: 1402, utilization_hours: 1126, province: '广东省', coordinates: [110.925533, 21.662728] },
{ city: '黄山', total_radiation: 1402, utilization_hours: 1126, province: '安徽省', coordinates: [118.337643, 29.714886] },
{ city: '上海', total_radiation: 1394, utilization_hours: 1120, province: '上海市', coordinates: [121.473667, 31.230525] },
{ city: '张家界', total_radiation: 1391, utilization_hours: 1118, province: '湖南省', coordinates: [110.478887, 29.117343] },
{ city: '汕尾', total_radiation: 1391, utilization_hours: 1118, province: '广东省', coordinates: [115.375557, 22.787204] },
{ city: '南京', total_radiation: 1389, utilization_hours: 1116, province: '江苏省', coordinates: [118.796624, 32.059344] },
{ city: '泰州', total_radiation: 1387, utilization_hours: 1115, province: '江苏省', coordinates: [119.922883, 32.456692] },
{ city: '台州', total_radiation: 1387, utilization_hours: 1115, province: '浙江省', coordinates: [121.42079, 28.655716] },
{ city: '百色', total_radiation: 1383, utilization_hours: 1112, province: '广西壮族自治区', coordinates: [106.61869, 23.90307] },
{ city: '深圳', total_radiation: 1380, utilization_hours: 1109, province: '广东省', coordinates: [114.057939, 22.543527] },
{ city: '丽水', total_radiation: 1376, utilization_hours: 1106, province: '浙江省', coordinates: [119.923249, 28.467694] },
{ city: '温州', total_radiation: 1376, utilization_hours: 1106, province: '浙江省', coordinates: [120.699279, 27.993849] },
{ city: '毕节', total_radiation: 1372, utilization_hours: 1103, province: '贵州省', coordinates: [105.291544, 27.283615] },
{ city: '江门', total_radiation: 1372, utilization_hours: 1103, province: '广东省', coordinates: [113.081548, 22.578948] },
{ city: '北海', total_radiation: 1372, utilization_hours: 1103, province: '广西壮族自治区', coordinates: [109.120248, 21.481305] },
{ city: '舟山', total_radiation: 1372, utilization_hours: 1103, province: '浙江省', coordinates: [122.207395, 29.985578] },
{ city: '上饶', total_radiation: 1372, utilization_hours: 1103, province: '江西省', coordinates: [117.943064, 28.45513] },
{ city: '荆州', total_radiation: 1369, utilization_hours: 1100, province: '湖北省', coordinates: [112.24143, 30.336282] },
{ city: '惠州', total_radiation: 1365, utilization_hours: 1097, province: '广东省', coordinates: [114.415587, 23.112368] },
{ city: '玉林', total_radiation: 1365, utilization_hours: 1097, province: '广西壮族自治区', coordinates: [110.18097, 22.654001] },
{ city: '崇左', total_radiation: 1365, utilization_hours: 1097, province: '广西壮族自治区', coordinates: [107.364973, 22.377139] },
{ city: '常州', total_radiation: 1361, utilization_hours: 1094, province: '江苏省', coordinates: [119.974092, 31.811313] },
{ city: '无锡', total_radiation: 1354, utilization_hours: 1088, province: '江苏省', coordinates: [120.311889, 31.491064] },
{ city: '湖州', total_radiation: 1351, utilization_hours: 1085, province: '浙江省', coordinates: [120.086881, 30.894178] },
{ city: '扬州', total_radiation: 1347, utilization_hours: 1082, province: '江苏省', coordinates: [119.412834, 32.394404] },
{ city: '衢州', total_radiation: 1347, utilization_hours: 1082, province: '浙江省', coordinates: [118.859307, 28.970229] },
{ city: '合肥', total_radiation: 1347, utilization_hours: 1082, province: '安徽省', coordinates: [117.227267, 31.820567] },
{ city: '六安', total_radiation: 1347, utilization_hours: 1082, province: '安徽省', coordinates: [116.519729, 31.735892] },
{ city: '黄冈', total_radiation: 1343, utilization_hours: 1079, province: '湖北省', coordinates: [114.872425, 30.453722] },
{ city: '镇江', total_radiation: 1343, utilization_hours: 1079, province: '江苏省', coordinates: [119.424441, 32.188141] },
{ city: '苏州', total_radiation: 1343, utilization_hours: 1079, province: '江苏省', coordinates: [120.585294, 31.299758] },
{ city: '鹰潭', total_radiation: 1343, utilization_hours: 1079, province: '江西省', coordinates: [117.039532, 28.272092] },
{ city: '马鞍山', total_radiation: 1343, utilization_hours: 1079, province: '安徽省', coordinates: [118.50685, 31.668765] },
{ city: '韶关', total_radiation: 1340, utilization_hours: 1076, province: '广东省', coordinates: [113.597324, 24.810977] },
{ city: '钦州', total_radiation: 1340, utilization_hours: 1076, province: '广西壮族自治区', coordinates: [108.654355, 21.980894] },
{ city: '防城港', total_radiation: 1340, utilization_hours: 1076, province: '广西壮族自治区', coordinates: [108.35467, 21.686732] },
{ city: '宁波', total_radiation: 1340, utilization_hours: 1076, province: '浙江省', coordinates: [121.62454, 29.860258] },
{ city: '赣州', total_radiation: 1340, utilization_hours: 1076, province: '江西省', coordinates: [114.933494, 25.831139] },
{ city: '鄂州', total_radiation: 1336, utilization_hours: 1074, province: '湖北省', coordinates: [114.894909, 30.391461] },
{ city: '河源', total_radiation: 1336, utilization_hours: 1074, province: '广东省', coordinates: [114.700215, 23.744276] },
{ city: '嘉兴', total_radiation: 1336, utilization_hours: 1074, province: '浙江省', coordinates: [120.755623, 30.746814] },
{ city: '滁州', total_radiation: 1336, utilization_hours: 1074, province: '安徽省', coordinates: [118.333439, 32.255904] },
{ city: '南宁', total_radiation: 1335, utilization_hours: 1073, province: '广西壮族自治区', coordinates: [108.366407, 22.8177] },
{ city: '铜陵', total_radiation: 1332, utilization_hours: 1071, province: '安徽省', coordinates: [117.811298, 30.945214] },
{ city: '宣城', total_radiation: 1332, utilization_hours: 1071, province: '安徽省', coordinates: [118.759127, 30.939278] },
{ city: '抚州', total_radiation: 1329, utilization_hours: 1068, province: '江西省', coordinates: [116.358054, 27.948979] },
{ city: '池州', total_radiation: 1329, utilization_hours: 1068, province: '安徽省', coordinates: [117.495663, 30.674264] },
{ city: '梧州', total_radiation: 1325, utilization_hours: 1065, province: '广西壮族自治区', coordinates: [111.279022, 23.476733] },
{ city: '金华', total_radiation: 1325, utilization_hours: 1065, province: '浙江省', coordinates: [119.647265, 29.079195] },
{ city: '景德镇', total_radiation: 1325, utilization_hours: 1065, province: '江西省', coordinates: [117.184892, 29.2744] },
{ city: '宁德', total_radiation: 1321, utilization_hours: 1062, province: '福建省', coordinates: [119.547729, 26.666222] },
{ city: '贵港', total_radiation: 1318, utilization_hours: 1059, province: '广西壮族自治区', coordinates: [109.598903, 23.11182] },
{ city: '随州', total_radiation: 1310, utilization_hours: 1053, province: '湖北省', coordinates: [113.382324, 31.690275] },
{ city: '莆田', total_radiation: 1310, utilization_hours: 1053, province: '福建省', coordinates: [119.007662, 25.454202] },
{ city: '南昌', total_radiation: 1310, utilization_hours: 1053, province: '江西省', coordinates: [115.857972, 28.682976] },
{ city: '吉安', total_radiation: 1310, utilization_hours: 1053, province: '江西省', coordinates: [114.96681, 27.091243] },
{ city: '咸阳', total_radiation: 1303, utilization_hours: 1047, province: '陕西省', coordinates: [108.708837, 34.329896] },
{ city: '商洛', total_radiation: 1303, utilization_hours: 1047, province: '陕西省', coordinates: [109.918646, 33.873358] },
{ city: '绍兴', total_radiation: 1299, utilization_hours: 1044, province: '浙江省', coordinates: [120.582886, 30.051549] },
{ city: '九江', total_radiation: 1299, utilization_hours: 1044, province: '江西省', coordinates: [115.95356, 29.66116] },
{ city: '来宾', total_radiation: 1296, utilization_hours: 1041, province: '广西壮族自治区', coordinates: [109.221243, 23.750105] },
{ city: '新余', total_radiation: 1296, utilization_hours: 1041, province: '江西省', coordinates: [114.916665, 27.818553] },
{ city: '贺州', total_radiation: 1292, utilization_hours: 1038, province: '广西壮族自治区', coordinates: [111.567216, 24.404182] },
{ city: '福州', total_radiation: 1292, utilization_hours: 1038, province: '福建省', coordinates: [119.296411, 26.074286] },
{ city: '云浮', total_radiation: 1288, utilization_hours: 1035, province: '广东省', coordinates: [112.044524, 22.915163] },
{ city: '东莞', total_radiation: 1285, utilization_hours: 1032, province: '广东省', coordinates: [113.751884, 23.021016] },
{ city: '孝感', total_radiation: 1281, utilization_hours: 1030, province: '湖北省', coordinates: [113.956962, 30.918311] },
{ city: '肇庆', total_radiation: 1270, utilization_hours: 1021, province: '广东省', coordinates: [112.465245, 23.047747] },
{ city: '株洲', total_radiation: 1263, utilization_hours: 1015, province: '湖南省', coordinates: [113.132783, 27.828862] },
{ city: '郴州', total_radiation: 1263, utilization_hours: 1015, province: '湖南省', coordinates: [113.015517, 25.770117] },
{ city: '柳州', total_radiation: 1263, utilization_hours: 1015, province: '广西壮族自治区', coordinates: [109.428071, 24.326442] },
{ city: '河池', total_radiation: 1263, utilization_hours: 1015, province: '广西壮族自治区', coordinates: [108.085244, 24.692906] },
{ city: '宜昌', total_radiation: 1256, utilization_hours: 1009, province: '湖北省', coordinates: [111.286962, 30.69217] },
{ city: '清远', total_radiation: 1252, utilization_hours: 1006, province: '广东省', coordinates: [113.056098, 23.682064] },
{ city: '佛山', total_radiation: 1252, utilization_hours: 1006, province: '广东省', coordinates: [113.121586, 23.021351] },
{ city: '杭州', total_radiation: 1248, utilization_hours: 1003, province: '浙江省', coordinates: [120.210792, 30.246026] },
{ city: '衡阳', total_radiation: 1237, utilization_hours: 994, province: '湖南省', coordinates: [112.572016, 26.894216] },
{ city: '常德', total_radiation: 1234, utilization_hours: 991, province: '湖南省', coordinates: [111.69905, 29.031446] },
{ city: '青岛', total_radiation: 1234, utilization_hours: 991, province: '山东省', coordinates: [120.382665, 36.066938] },
{ city: '咸宁', total_radiation: 1230, utilization_hours: 988, province: '湖北省', coordinates: [114.322601, 29.84135] },
{ city: '宜春', total_radiation: 1230, utilization_hours: 988, province: '江西省', coordinates: [114.416826, 27.816245] },
{ city: '桂林', total_radiation: 1223, utilization_hours: 983, province: '广西壮族自治区', coordinates: [110.179752, 25.235615] },
{ city: '萍乡', total_radiation: 1215, utilization_hours: 977, province: '江西省', coordinates: [113.887147, 27.658721] },
{ city: '仙桃', total_radiation: 1201, utilization_hours: 965, province: '湖北省', coordinates: [113.442973, 30.328407] },
{ city: '永州', total_radiation: 1194, utilization_hours: 959, province: '湖南省', coordinates: [111.613482, 26.419861] },
{ city: '邵阳', total_radiation: 1186, utilization_hours: 953, province: '湖南省', coordinates: [111.467855, 27.239528] },
{ city: '广元', total_radiation: 1186, utilization_hours: 953, province: '四川省', coordinates: [105.844004, 32.435774] },
{ city: '湘潭', total_radiation: 1179, utilization_hours: 947, province: '湖南省', coordinates: [112.945439, 27.83136] },
{ city: '神农架', total_radiation: 1179, utilization_hours: 947, province: '湖北省', coordinates: [110.675879, 31.745103] },
{ city: '岳阳', total_radiation: 1175, utilization_hours: 944, province: '湖南省', coordinates: [113.128922, 29.35648] },
{ city: '娄底', total_radiation: 1164, utilization_hours: 936, province: '湖南省', coordinates: [111.994468, 27.699838] },
{ city: '长沙', total_radiation: 1161, utilization_hours: 933, province: '湖南省', coordinates: [112.938882, 28.228304] },
{ city: '武汉', total_radiation: 1157, utilization_hours: 930, province: '湖北省', coordinates: [114.304569, 30.593354] },
{ city: '贵阳', total_radiation: 1154, utilization_hours: 927, province: '贵州省', coordinates: [106.628201, 26.646694] },
{ city: '益阳', total_radiation: 1153, utilization_hours: 927, province: '湖南省', coordinates: [112.355994, 28.554853] },
{ city: '荆门', total_radiation: 1153, utilization_hours: 927, province: '湖北省', coordinates: [112.199009, 31.035445] },
{ city: '广州', total_radiation: 1153, utilization_hours: 927, province: '广东省', coordinates: [113.264499, 23.130061] },
{ city: '天门', total_radiation: 1150, utilization_hours: 924, province: '湖北省', coordinates: [113.166545, 30.663706] },
{ city: '安顺', total_radiation: 1113, utilization_hours: 895, province: '贵州省', coordinates: [105.9476, 26.253103] },
{ city: '怀化', total_radiation: 1080, utilization_hours: 868, province: '湖南省', coordinates: [110.001598, 27.569813] },
{ city: '巴中', total_radiation: 1073, utilization_hours: 862, province: '四川省', coordinates: [106.747548, 31.867853] },
{ city: '雅安', total_radiation: 1066, utilization_hours: 856, province: '四川省', coordinates: [103.041538, 30.009998] },
{ city: '铜仁', total_radiation: 1059, utilization_hours: 851, province: '贵州省', coordinates: [109.189528, 27.731555] },
{ city: '重庆', total_radiation: 1040, utilization_hours: 836, province: '重庆市', coordinates: [106.550483, 29.563707] },
{ city: '湘西', total_radiation: 1033, utilization_hours: 830, province: '湖南省', coordinates: [109.737428, 28.312592] },
{ city: '绵阳', total_radiation: 1029, utilization_hours: 827, province: '四川省', coordinates: [104.679127, 31.467673] },
{ city: '达州', total_radiation: 1029, utilization_hours: 827, province: '四川省', coordinates: [107.46778, 31.209278] },
{ city: '南充', total_radiation: 1026, utilization_hours: 824, province: '四川省', coordinates: [106.110565, 30.837235] },
{ city: '遂宁', total_radiation: 1022, utilization_hours: 821, province: '四川省', coordinates: [105.592602, 30.53268] },
{ city: '德阳', total_radiation: 1018, utilization_hours: 818, province: '四川省', coordinates: [104.397795, 31.127449] },
{ city: '遵义', total_radiation: 1018, utilization_hours: 818, province: '贵州省', coordinates: [107.031922, 27.721931] },
{ city: '广安', total_radiation: 1011, utilization_hours: 812, province: '四川省', coordinates: [106.632647, 30.456354] },
{ city: '乐山', total_radiation: 1011, utilization_hours: 812, province: '四川省', coordinates: [103.766085, 29.552275] },
{ city: '成都', total_radiation: 1007, utilization_hours: 810, province: '四川省', coordinates: [104.066301, 30.572961] },
{ city: '恩施', total_radiation: 996, utilization_hours: 801, province: '湖北省', coordinates: [109.488076, 30.272104] },
{ city: '资阳', total_radiation: 996, utilization_hours: 801, province: '四川省', coordinates: [104.627265, 30.129236] },
{ city: '眉山', total_radiation: 993, utilization_hours: 798, province: '四川省', coordinates: [103.848417, 30.077113] },
{ city: '宜宾', total_radiation: 975, utilization_hours: 783, province: '四川省', coordinates: [104.642826, 28.752354] },
{ city: '自贡', total_radiation: 956, utilization_hours: 768, province: '四川省', coordinates: [104.779307, 29.33924] },
{ city: '泸州', total_radiation: 949, utilization_hours: 763, province: '四川省', coordinates: [105.441866, 28.87098] },
{ city: '内江', total_radiation: 945, utilization_hours: 760, province: '四川省', coordinates: [105.057992, 29.58021] }

    ];

    var provinces = {
        '西藏自治区': { center: [91.132212, 29.660361], zoom: 5 },
        '青海省': { center: [96.202544, 35.499761], zoom: 5 },
        '湖北省': { center: [112.238401, 31.049156], zoom: 5 },
        '四川省': { center: [102.89916, 30.367481], zoom: 5 }
    };

    var currentProvince = null;
    var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
    });

    // 添加总辐照量的图例
    map.on('load', function () {
        map.addSource('cities', {
            'type': 'geojson',
            'data': {
                'type': 'FeatureCollection',
                'features': cityData.map(function(city) {
                    return {
                        'type': 'Feature',
                        'geometry': {
                            'type': 'Point',
                            'coordinates': city.coordinates
                        },
                        'properties': {
                            'city': city.city,
                            'total_radiation': city.total_radiation,
                            'utilization_hours': city.utilization_hours
                        }
                    };
                })
            }
        });

        map.addLayer({
            'id': 'cities-layer',
            'type': 'circle',
            'source': 'cities',
            'paint': {
                'circle-radius': 8,
                'circle-color': [
                    'interpolate',
                    ['linear'],
                    ['get', 'total_radiation'],
                    800, 'green',
                    1200, 'yellow',
                    1600, 'orange',
                    2000, 'red'
                ],
                'circle-opacity': 0.8
            }
        });

        // 添加鼠标悬停效果
        map.on('mouseenter', 'cities-layer', function (e) {
            map.getCanvas().style.cursor = 'pointer';
            var coordinates = e.features[0].geometry.coordinates.slice();
            var city = e.features[0].properties.city;
            var totalRadiation = e.features[0].properties.total_radiation;
            var utilizationHours = e.features[0].properties.utilization_hours;

            popup.setLngLat(coordinates)
                .setHTML('<h3>' + city + '</h3>' +
                         '<p>总辐照量：' + totalRadiation + ' kWh/m²</p>' +
                         '<p>利用小时：' + utilizationHours + '</p>')
                .addTo(map);
        });

        map.on('mouseleave', 'cities-layer', function () {
            map.getCanvas().style.cursor = '';
            setTimeout(function() {
                popup.remove();
            }, 1500);
        });
    });

    // 搜索城市
    function searchCity() {
        var cityName = document.getElementById('search-input').value.trim();
        var city = cityData.find(function(c) {
            return c.city === cityName;
        });
        if (city) {
            map.flyTo({
                center: city.coordinates,
                zoom: 7
            });
            currentProvince = null;
            showBackButton();
            showCityInfo(city.city, city.total_radiation, city.utilization_hours);
        } else {
            alert('未找到该城市，请输入有效的城市名称！');
        }
    }

    // 返回按钮
    function goBack() {
        map.flyTo({
            center: [104.195397, 35.86166],
            zoom: 3
        });
        hideBackButton();
        currentProvince = null;
        hideCityInfo();
    }

    // 下载数据为CSV文件
    function downloadCSV() {
        var csvContent = "data:text/csv;charset=utf-8,";
        csvContent += "\uFEFF"; // 添加BOM头，确保Excel中文显示正确
        csvContent += "城市,总辐照量 kWh/m²,利用小时\n";
        cityData.forEach(function(city) {
            csvContent += city.city + "," + city.total_radiation + "," + city.utilization_hours + "\n";
        });

        var encodedUri = encodeURI(csvContent);
        var link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "city_data.csv");
        document.body.appendChild(link); // Required for FF

        link.click(); // This will download the data file named "city_data.csv".
    }

    // 显示/隐藏说明信息
    function toggleInfo() {
        var infoContent = document.getElementById('info-content');
        infoContent.style.display = infoContent.style.display === 'block' ? 'none' : 'block';
    }

    // 显示城市信息
    function showCityInfo(city, totalRadiation, utilizationHours) {
        var info = '<h3>' + city + '</h3>' +
                   '<p>总辐照量：' + totalRadiation + ' kWh/m²</p>' +
                   '<p>利用小时：' + utilizationHours + '</p>';
        document.getElementById('city-info').innerHTML = info;
    }

    // 隐藏城市信息
    function hideCityInfo() {
        document.getElementById('city-info').innerHTML = '';
    }

    // 显示返回按钮
    function showBackButton() {
        document.getElementById('back-button').style.display = 'block';
    }

    // 隐藏返回按钮
    function hideBackButton() {
        document.getElementById('back-button').style.display = 'none';
    }

</script>

</body>
</html>
